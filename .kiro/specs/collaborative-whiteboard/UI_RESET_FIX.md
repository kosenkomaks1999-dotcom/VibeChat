# Исправление сброса UI между комнатами

## Проблема
При переходе между комнатами настройки инструментов (цвет, размер, тип) сохранялись визуально в UI, что приводило к рисованию несколькими инструментами одновременно.

**Пример:**
1. Комната А: выбрали жирный розовый маркер
2. Комната Б: выбрали тонкий зеленый маркер
3. Результат: рисовали одновременно жирным розовым И тонким зеленым

## Причина
- `WhiteboardManager` создавался заново с дефолтными настройками
- Но UI кнопки (active классы) оставались в старом состоянии
- Это создавало рассинхронизацию между внутренним состоянием и UI

## Решение
Добавлен метод `resetUI()` который вызывается при открытии whiteboard.

### Что делает resetUI():

1. **Сбрасывает инструменты:**
   - Убирает `active` класс со всех кнопок инструментов
   - Добавляет `active` на кнопку "marker" (дефолт)

2. **Сбрасывает цвета:**
   - Убирает `active` класс со всех кнопок цветов
   - Добавляет `active` на черный цвет (#000000)

3. **Сбрасывает размер:**
   - Устанавливает слайдер на дефолтное значение (15)
   - Обновляет отображение значения

### Код:
```javascript
resetUI() {
  // Сбрасываем кнопки инструментов
  document.querySelectorAll('.whiteboard-tool-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector('[data-tool="marker"]').classList.add('active');
  
  // Сбрасываем кнопки цветов
  document.querySelectorAll('.whiteboard-color-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector('[data-color="#000000"]').classList.add('active');
  
  // Сбрасываем слайдер
  document.getElementById('whiteboardSizeSlider').value = this.currentSize;
  document.getElementById('whiteboardSizeValue').textContent = this.currentSize;
}
```

## Когда вызывается
`resetUI()` вызывается в методе `open()` после `setupEventHandlers()`:

```javascript
open() {
  // ... инициализация ...
  this.setupEventHandlers();
  this.resetUI(); // ← Сброс UI
  this.loadExistingStrokes();
  // ...
}
```

## Дефолтные настройки

При создании нового whiteboard:
- **Инструмент:** marker (маркер)
- **Цвет:** #000000 (черный)
- **Размер:** 15

## Логи

В консоли вы увидите:
```
[resetUI] Resetting UI to defaults
[resetUI] UI reset complete: {tool: 'marker', color: '#000000', size: 15}
```

## Тестирование

1. **Войдите в комнату А**
2. **Откройте whiteboard**
3. **Выберите розовый цвет (#FF00FF) и размер 30**
4. **Нарисуйте что-то**
5. **Закройте whiteboard**
6. **Выйдите из комнаты А**
7. **Войдите в комнату Б**
8. **Откройте whiteboard**
9. **Проверьте UI:**
   - Активен черный цвет
   - Активен маркер
   - Размер = 15
10. **Нарисуйте что-то**
11. **Результат:** Рисуется ТОЛЬКО черным маркером размера 15

## Результат
Теперь каждая комната начинается с чистого UI состояния, независимо от того, что было выбрано в предыдущей комнате.
